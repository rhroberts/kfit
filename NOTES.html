<h1 id="development-notes-and-to-dos">Development Notes and TO-DOs</h1>
<h2 id="notes">Notes</h2>
<h2 id="to-dos">TO-DOs</h2>
<h3 id="high-priority">High Priority</h3>
<ul>
<li><p>Allow user to select fitting range</p></li>
<li>Reconcile amp/height, sigma/fwhm
<ul>
<li>would be better if user specifies height and fwhm</li>
</ul></li>
<li><p>App crashes when loading new data set <em>after</em> fitting initial one</p></li>
</ul>
<h3 id="medium-priority">Medium Priority</h3>
<ul>
<li>Still need to figure of the issue of having to initialize model with something
<ul>
<li>Don’t want to always have to use a line in the model</li>
</ul></li>
<li>Removing user entry from text box doesn’t reset value to guess
<ul>
<li>is this resolved?</li>
</ul></li>
<li><p>Need to show warning when user tries to enter value above/below the parameter bounds</p></li>
<li><p>Continue to clean up messy code</p></li>
</ul>
<h3 id="low-priority">Low Priority</h3>
<ul>
<li>Would be interesting to have the app “learn” from previous fits
<ul>
<li>this would just be keeping the results, for example, for gau1 and using those in the next fit, even if other models are added</li>
</ul></li>
<li>Would be cool for user to be able to click on the graph to choose param values (e.g. click at peak center to set lor1_center(val,min,max)
<ul>
<li>not sure how to implement this yet</li>
</ul></li>
<li>Think more carefully about when/why things <em>actually</em> need to be class attributes of App()</li>
</ul>
<h3 id="done">Done</h3>
<ul>
<li>Showing the current values next to the param user inputs will be essential, and will also help me with debugging
<ul>
<li>my solution is to have the current vals be the placeholder text in the “value” box, “max” and “min” show the max and min set in self.params</li>
</ul></li>
<li>Parameter Widgets
<ul>
<li>These should be added by buttons (Gaussians [+], etc..) for each parameter columns</li>
<li>Should not erase all widgets and start over when one is added
<ul>
<li>This forgets user input values</li>
<li>My solution still rewrites the widgets, but it’s working at least</li>
</ul></li>
</ul></li>
<li>Connect usr_input with fitting process
<ul>
<li>Placeholder text needs to be updated after user entry
<ul>
<li>When you removes the text they added after updating the params, the default value used in the model is the previous user entry, but the placeholder text show the initial guess by the program</li>
</ul></li>
<li>Now usr text stays after fitting but <strong>not when peaks are added to the model</strong>
<ul>
<li>This is because init_params() is called on [+/-] click, which wipes the layout</li>
<li>Though to be fair the usr input does remain as placeholder text</li>
</ul></li>
<li>still some weird stuff like after fitting the value placeholder text doesn’t change</li>
</ul></li>
<li>The layout itself should have a fixed height
<ul>
<li>i.e. not eat up space from the plot widget when there are a bunch of params</li>
<li>Something should fill this space before the first fit</li>
</ul></li>
<li><p>And each column should be individually scrollable</p></li>
<li>Need a better data structure for usr_entry
<ul>
<li>dealing with val, min, and max</li>
<li>solution: nested dict</li>
</ul></li>
<li><p>Make the param_layout have four columns – one for each peak types</p></li>
<li>Am I using pyqtSlot() correctly?
<ul>
<li>https://stackoverflow.com/questions/39210500/how-do-i-connect-a-pyqt5-slot-to-a-signal-function-in-a-class</li>
<li>seems like I can probably delete them all…
<ul>
<li>yup</li>
</ul></li>
</ul></li>
<li>Add lineEntry widgets for min() and max() parmeters as well…
<ul>
<li>Round off the placeholder text in entry widgets
<ul>
<li>done, but should really do something more robust in cases of values on the order of <span class="math inline">10<sup> − 6</sup></span> or smaller
<ul>
<li>eh, it’s just the placeholder, not the value being used</li>
</ul></li>
</ul></li>
</ul></li>
<li>Fix the app logic re:
<ul>
<li>When are fit(), update_usr_params(), and guess_params() called
<ul>
<li>Right now it’s a clusterfuck and user params get overwritten by guesses when fitting</li>
<li>Also, as it stands guess_params doesn’t work without a call to fit, but this results in really slow fits w/o user having opportunity to specify params first</li>
</ul></li>
</ul></li>
<li>How will we get user entry from the param widgets if they are dynamic?
<ul>
<li>Status:
<ul>
<li>I can connect them up to slots, and all entry widgets can produce a signal</li>
<li>Need to direct those to the param values…</li>
<li>Can print out the user entered value, but…
<ul>
<li>With multiples of the same peak type (or in family gau/lor/voi), only the last peak can be addressed…</li>
<li>The former line entries are overwritten in loop</li>
<li>Perhaps need a dictionary?</li>
</ul></li>
<li><strong>I think I need to separate the “setting up the model, taking first guesses” and the “user updating of model params” functionality</strong></li>
<li>Done</li>
</ul></li>
<li>Solution:
<ul>
<li>Just needed to keep the line entry widgets in a dictionary, all good now</li>
</ul></li>
</ul></li>
</ul>
